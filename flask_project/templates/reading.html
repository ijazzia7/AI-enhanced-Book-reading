<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      console.log('wefewrf')
      window.BOOK_DATA = {
        totalPages: {{ totalPages }},
        chapterStarts: {{ chapterStarts }}
      };
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Live Book Reader</title>
    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-papKVm+af/0Hq6Ob5fwDV2xVawVbPe/2JGr6f7X0Zw7IuPONeBv3tE39BJnYlqjt5kKFSks2yT1A4/2X2Xg0Xw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='reading.css') }}"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Montserrat:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header></header>

    <main>
      <!--<div id="popupOverlay" class="popup-overlay hidden">
        <div class="popup-content">
          <h2></h2>
          <p></p>
          <button id="closePopup">Close</button>
        </div>
      </div> -->
      <audio id="audio-player" controls style="display: none"></audio>

      <!-- Modal -->
      <div class="modal-overlay" id="modalOverlay">
        <div
          class="modal"
          role="dialog"
          aria-modal="true"
          aria-labelledby="modalTitle"
          aria-describedby="modalDesc"
        >
          <button class="modal-close" aria-label="Close">&times;</button>
          <div class="modal-content">
            <img src="" alt="" id="modalImg" />
            <h2 id="modalTitle">Character Name</h2>
            <p id="modalDesc">Character description goes here.</p>
          </div>
          <div class="modal-footer">
            <button class="prev" aria-label="Previous Character">
              &larr; Prev
            </button>
            <button class="next" aria-label="Next Character">
              Next &rarr;
            </button>
          </div>
        </div>
      </div>
      <!-- Summary Popup 
      <div id="summaryPopup" style="display: none">
        <div class="popup-content">
          <button id="closeSummaryPopup" class="close-btn">Ã—</button>
          <h2 id="chapSumTitle"></h2>
          <div id="summaryText" class="summary-scroll"></div>
          <button id="saveSummary">Save Summary</button>
        </div>
      </div>
        -->
      <!-- Modal for paraVisualization -->
      <div class="modal-overlay-2" id="modalOverlay-2">
        <div class="modal-2">
          <button class="modal-close-2" onclick="closeImageModal2()">
            &times;
          </button>
          <div class="modal-content-2">
            <img id="modalImg-2" src="" alt="Generated Image" />
          </div>
        </div>
      </div>

      <div class="popup_with_chatbot">
        <div class="characters">
          <button class="popup_button_chatbot" id="charactersButton">
            <span
              id="charBadge"
              class="notification-badge"
              style="display: none"
              >!</span
            >
            <img
              src="static/images/person.png"
              alt="icon"
              class="button_icon_chatbot"
            />
          </button>
        </div>

        <div id="popup">
          <button class="popup_buttons" id="annotateBtn">
            <img
              src="static/images/annotate.png"
              alt="icon"
              class="button_icon"
            />Annotate
          </button>
          <button class="popup_buttons">
            <img
              src="static/images/highlight.png"
              alt="icon"
              class="button_icon"
              id="highlight-button"
            />Highlight
          </button>

          <button class="popup_buttons" id="bookmark-button">
            <img
              src="static/images/bookmark.png"
              alt="icon"
              class="button_icon"
            />Place Bookmark
          </button>
          <button class="popup_buttons">
            <img
              src="static/images/notes.png"
              alt="icon"
              class="button_icon"
              id="addNotesBtn"
            />Notes
          </button>
          <button class="popup_buttons">
            <img
              src="static/images/dictionary.png"
              alt="icon"
              class="button_icon"
              id="dictionaryBtn"
            />Dictionary
          </button>
        </div>
      </div>

      <div id="wrapper">
        <div id="progressWrapper">
          <div id="progressTrack">
            <div id="progressFill"></div>
            <div id="chapterMarkers"></div>
          </div>
        </div>

        <div id="container">
          <section class="open-book">
            <div class="bookmark-icon" id="displayBookmark">
              <img src="static/images/bookmark_to_display.png" alt="Bookmark" />
            </div>

            <header>
              <h1 id="book_name">The Kite Runner</h1>
              <h6 id="author">Khaled Husseni</h6>
            </header>
            <article>
              <canvas class="annotation-canvas" id="canvas-left"></canvas>
              <canvas class="annotation-canvas" id="canvas-right"></canvas>

              <div id="bothPages">
                <div id="book-content-1" class="book-content"></div>
                <div id="book-content-2" class="book-content"></div>
              </div>
            </article>
            <footer>
              <div id="page-numbers">
                <div id="page-number-1">1</div>
                <div id="page-number-2">2</div>
                <div
                  id="fixed-tooltip-dictionary"
                  class="custom-tooltip-dictionary"
                ></div>
                <div id="fixed-tooltip-ai" class="custom-tooltip-ai"></div>
              </div>
            </footer>
          </section>

          <button id="prev-button">Back</button>
          <button id="next-button">Next</button>
        </div>
      </div>
      <div class="popup_with_chatbot">
        <div id="popup">
          <button class="popup_buttons" id="simple-meaning">
            <img
              src="static/images/meaning.png"
              alt="icon"
              class="button_icon"
            />Meaning
          </button>
          <button class="popup_buttons" id="contextual-meaning">
            <img
              src="static/images/context.png"
              alt="icon"
              class="button_icon"
            />Contextual Meaning
          </button>
          <button class="popup_buttons" id="create-sentence">
            <img
              src="static/images/sentence.png"
              alt="icon"
              class="button_icon"
            />Create Sentence
          </button>
          <button class="popup_buttons" id="generate-audio">
            <img
              src="static/images/speak.png"
              alt="icon"
              class="button_icon"
            />Speak
          </button>
          <button class="popup_buttons" id="vis-para">
            <img
              src="static/images/visualize.png"
              alt="icon"
              class="button_icon"
            />Visualize Para
          </button>
        </div>
        <div class="summarize">
          <button class="popup_button_chatbot" id="summarizeButton">
            <img
              src="static/images/summarize.png"
              alt="icon"
              class="button_icon_summ"
            />
          </button>
        </div>
      </div>

      <div class="overlay" id="overlay"></div>
      <div class="notes_section">
        <div class="sticky-container">
          <!--   sticky notes are created here -->
        </div>
      </div>
    </main>
    <div class="chatbot" id="chatbot">
      <div class="chatbot__header" id="toggle">
        <p>Literary Assistant</p>
        <svg class="chatbot__close-button" viewBox="0 0 24 24">
          <path d="M18 6L6 18M6 6l12 12" />
        </svg>
      </div>
      <div class="chatbot__message-window">
        <ul class="chatbot__messages" id="messages">
          <li class="is-ai">
            <div class="chatbot__arrow"></div>
            <div class="chatbot__message">
              Hello, ask me anything about the book.
            </div>
          </li>
        </ul>
      </div>
      <div class="chatbot__entry">
        <button class="chatbot__record" id="record_send">Voice</button>
        <input
          class="chatbot__input"
          id="input"
          placeholder="Start chatting with our AI..."
        />
        <button class="chatbot__submit" id="send">Send</button>
      </div>
    </div>

    <footer></footer>

    <script src="{{ url_for('static', filename='reading.js') }}"></script>
  </body>
</html>
