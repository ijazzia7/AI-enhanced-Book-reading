<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Live Book Reader</title>
    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-papKVm+af/0Hq6Ob5fwDV2xVawVbPe/2JGr6f7X0Zw7IuPONeBv3tE39BJnYlqjt5kKFSks2yT1A4/2X2Xg0Xw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Montserrat:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <h1>Live Book Reader</h1>
      <nav>
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Library</a></li>
          <li><a href="#">Bookmarks</a></li>
          <li><a href="/about">About</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <!-- Book (left-side) -->

      <div id="popup2">
        <button class="popup_buttons2" id="home-icon">
          <img src="static/images/home.png" alt="icon" class="button_icon" />
        </button>
        <button class="popup_buttons2" id="contextual-meaning">
          <img
            src="static/images/continue_reading.png"
            alt="icon"
            class="button_icon"
          />
        </button>
      </div>
      <div class="vertical-line"></div>

      <div id="reading-container">
        <div id="book-content">
          <!-- Book content will be dynamically injected here -->
        </div>

        <div class="book-navigation">
          <button id="prev-button">Previous</button>
          <div id="page_num_container">
            <span id="page_num" controls></span>
          </div>
          <button id="next-button">Next</button>
          <audio id="audio-player" controls style="display: none"></audio>
        </div>
      </div>

      <div id="popup">
        <button class="popup_buttons" id="simple-meaning">
          <img
            src="static/images/meaning.png"
            alt="icon"
            class="button_icon"
          />Meaning
        </button>
        <button class="popup_buttons" id="contextual-meaning">
          <img
            src="static/images/context.png"
            alt="icon"
            class="button_icon"
          />Contextual Meaning
        </button>
        <button class="popup_buttons" id="create-sentence">
          <img
            src="static/images/sentence.png"
            alt="icon"
            class="button_icon"
          />Create Sentence
        </button>
        <button class="popup_buttons" id="generate-audio">
          <img
            src="static/images/speak.png"
            alt="icon"
            class="button_icon"
          />Speak
        </button>
        <button class="popup_buttons" id="vis-para">
          <img
            src="static/images/visualize.png"
            alt="icon"
            class="button_icon"
          />Visualize Para
        </button>
      </div>

      <!-- functionality (right side) -->
      <div id="side-panel">
        <div class="side-tabs">
          <button id="tab-chat" class="active">Chat</button>
          <button id="tab-insights">Insights</button>
          <button id="tab-visualization">Visualization</button>
        </div>

        <div id="tab-content">
          <!-- Chat Tab -->
          <div id="chat-container">
            <div id="chat-box">
              <!-- Chat messages appear here -->
            </div>

            <div id="input-container">
              <button id="record-audio-button">
                <i class="fas fa-microphone">Voice</i>
              </button>
              <input
                type="text"
                id="message-input"
                placeholder="Type your message..."
              />
              <!-- Replace "Send" with a paper-plane icon -->
              <button id="chat-send-button">
                <i class="fab fa-telegram-plane">Send</i>
              </button>
            </div>
          </div>
          <!-- Insights Tab -->
          <div id="insights-container" style="display: none">
            <!-- Generated outputs appear here -->
          </div>
          <!-- Visualization Tab -->
          <div id="visual-container" style="display: none">
            <!-- Generated outputs appear here -->
          </div>
        </div>
      </div>
    </main>

    <!-- The interactive popup (for text selection) is created dynamically by JS -->

    <!-- Fixed Footer -->
    <footer>
      <p>&copy; 2025 Live Book Reader. All rights reserved.</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
